{% extends 'profile_base.html' %}
{% block title %}Profile | Frutonp - Nepal's Online fruits and vegetables sharing center{% endblock title %}

{% block content %}
<div class="modal-close change-name">
    &times;
</div>
<!-- Form modal for change name -->
<div class="w-100" id="change-name-modal">
    <div class="pd-10">
        <div class="w-100">
            <h2 class="text-center sticky" style="margin: 80px 0px 60px 0px;">Change Name</h2>
            <div class="w-75 w-75-mg" style="margin: auto auto;">
                <form style="margin: 15px 0px;" action="{% url 'changeName' %}" method="POST">
                    {% csrf_token %}
                    <div class="pd-5">
                        <label for="nameId">New name</label>
                        <input type="text" name="name" id="nameId">
                        <span class="err-mssg">
                               
                        </span>
                    </div>

                    <div class="pd-5">
                        <label for="change-name-passwordId">Password</label>
                        <input type="password" name="pass" id="change-name-passwordId">
                    </div>
                    <div class="pd-5">
                        <button style="color: #eee" name="post" class="update-btn" disabled="disabled">Change</button>
                    </div>
                    <div class="pd-5">
                        *Note:- Name can only be changed after 45 days of last update.
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
{% block scripts %}
    <script>
        $(document).ready(function(){
            $('input').keyup(function(){
                var val = $('input[name=name]').val();
                if(/^[a-zA-Z-_ ]*$/.test(val) === false || val.length <= 4 || val.length > 48){
                    $(".err-mssg").text("Must be more than 4 characters.");
                    $(".update-btn").attr("disabled", "disabled");

                } else {
                    $(".err-mssg").text("");
                    $(".update-btn").removeAttr("disabled");
                }
            });
        });
    </script>
{% endblock scripts %}
    